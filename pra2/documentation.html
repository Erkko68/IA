<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Slider Selector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Button Container - Positioned beside the images */
        .button-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-start;
        }

        .button-container button {
            padding: 15px 25px;
            font-size: 18px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
            width: 100%;
            text-align: left;
        }

        .button-container button:hover {
            background-color: #45a049;
        }

        .button-container button.selected {
            background-color: #357a38;
        }

        /* Container for Images and Slider */
        .content-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            padding: 20px;
        }

        .image-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        /* Slider below images */
        .slider-container {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
        }

        /* New wrapper for slider and labels */
        .slider-wrapper {
            position: relative;
            width: 80%;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Slider itself */
        #imageSlider {
            width: 100%;
        }

        /* Container for the labels */
        .slider-labels {
            display: flex;
            justify-content: space-between;
            position: absolute;
            bottom: -30px; /* Position labels beneath the slider */
            width: 100%;
            text-align: center;
        }

        /* Separator line across the screen */
        .separator {
            width: 100%;
            height: 1px;
            background-color: #ddd;
            margin: 20px 0;
        }

        /* New Silhouette Container with Grid layout */
        .silhouette-container {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Split into two equal columns */
            width: 100%;
            height: 50vh; /* Takes half of the screen vertically */
        }

        /* Container for Text and Image */
        .silhouette-text-container, .silhouette-image-container {
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Text container styles */
        .text-dialogue {
            padding: 15px;
            background-color: #f0f0f0;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
            text-align: center; /* Center the text inside the box */
            max-width: 90%; /* Prevents text from overflowing */
        }

        /* Image container styles */
        #silhouetteImage {
            object-fit: contain;
            display: block;
        }
    </style>
</head>
<body>
    <h1>Artificial Inteligence: Assigment 2</h1>
    <p>Use the buttons to browse images grouped by folders and the slider to select the number of clusters.</p>

    <!-- Content container for images and buttons -->
    <div class="content-container">
        <!-- Button Container -->
        <div class="button-container" id="buttonContainer">
            <!-- Buttons for scaling options will be dynamically created -->
        </div>

        <!-- Image container -->
        <div class="image-container">
            <img id="displayedImage" src="" alt="Displayed Image (Load Curve)" width="800">
            <img id="tsneImage" src="" alt="TSNE Image" width="550">
        </div>
    </div>

    <!-- Slider below images -->
    <div class="slider-container">
        <div class="slider-wrapper">
            <input id="imageSlider" type="range" min="1" max="1" value="1">
            <div class="slider-labels" id="sliderLabels"></div>
        </div>
    </div>

    <!-- Separator line across the screen -->
    <div class="separator"></div>

    <!-- New Silhouette Container below images with two inner containers -->
    <div class="silhouette-container">
        <!-- Container for text -->
        <div class="silhouette-text-container">
            <div class="text-dialogue" id="scalingDescription">Select a scaling method to see the description here.</div>
        </div>

        <!-- Container for image -->
        <div class="silhouette-image-container">
            <img id="silhouetteImage" src="" alt="Silhouette Image" width="1000">
        </div>
    </div>

    <script>
        const scalingOptions = {
            "MaxAbsScaling": "MaxAbsScaling",
            "MinMaxScaling": "MinMaxScaling",
            "RobustScaling": "RobustScaling",
            "ZNormScaling": "ZNormScaling",
            "PowerTransformerScaling": "PowerTransformerScaling"
        };

        const buttonContainer = document.getElementById("buttonContainer");
        const imageSlider = document.getElementById("imageSlider");
        const displayedImage = document.getElementById("displayedImage");
        const tsneImage = document.getElementById("tsneImage");
        const silhouetteImage = document.getElementById("silhouetteImage");
        const scalingDescription = document.getElementById("scalingDescription");
        const sliderLabels = document.getElementById("sliderLabels");

        let currentFolder = Object.keys(scalingOptions)[0];
        let currentImageIndex = 0;

        // Create buttons for scaling options
        Object.keys(scalingOptions).forEach(folder => {
            const button = document.createElement("button");
            button.textContent = folder;
            button.onclick = () => {
                currentFolder = folder;
                updateSliderAndImage();
                updateScalingDescription(folder);
                setSelectedButton(button);
            };
            buttonContainer.appendChild(button);
        });

        // Set the selected button's color
        function setSelectedButton(selectedButton) {
            const buttons = document.querySelectorAll('.button-container button');
            buttons.forEach(button => button.classList.remove('selected'));
            selectedButton.classList.add('selected');
        }

        // Update the slider and image based on the selected folder
        function updateSliderAndImage() {
            const imageCount = 6; // Number of images in each folder

            // Update the slider range
            imageSlider.max = imageCount;
            imageSlider.value = currentImageIndex + 1;

            // Update the slider labels
            updateSliderLabels(imageCount);

            // Update the displayed images
            updateImage();
        }

        // Update the displayed images based on the slider value
        function updateImage() {
            const currentCluster = currentImageIndex + 2; // Adjust index to match filenames
            const loadCurvePath = `plots/kmeans/${currentFolder}/load_curves_${currentCluster}.png`;
            const tsnePath = `plots/kmeans/${currentFolder}/tsne_${currentCluster}.png`;
            const silhouettePath = `plots/kmeans/${currentFolder}/silhouette.png`;

            displayedImage.src = loadCurvePath;
            tsneImage.src = tsnePath;
            silhouetteImage.src = silhouettePath;
        }

        // Update the description text based on the selected scaling
        function updateScalingDescription(scalingType) {
            const descriptions = {
                "MaxAbsScaling": "MaxAbsScaling scales each feature by its maximum absolute value, making the largest value in each feature equal to 1 or -1.",
                "MinMaxScaling": "MinMaxScaling transforms features by scaling each feature to a given range, typically [0, 1].",
                "RobustScaling": "RobustScaling scales features using the median and the interquartile range, making it robust to outliers.",
                "ZNormScaling": "ZNormScaling standardizes the features to have a mean of 0 and a standard deviation of 1.",
                "PowerTransformerScaling": "PowerTransformerScaling applies a power transformation to make the data more Gaussian-like."
            };

            scalingDescription.textContent = descriptions[scalingType] || "Select a scaling method to see the description here.";
        }

        // Update the slider labels
        function updateSliderLabels(max) {
            sliderLabels.innerHTML = '';
            for (let i = 1; i <= max; i++) {
                const label = document.createElement('span');
                label.textContent = i;
                sliderLabels.appendChild(label);
            }
        }

        // Event listeners
        imageSlider.addEventListener("input", () => {
            currentImageIndex = imageSlider.value - 1;
            updateImage();
        });

        // Initialize the images, labels, and description
        updateSliderAndImage();
        updateScalingDescription(currentFolder);
    </script>
</body>
</html>
